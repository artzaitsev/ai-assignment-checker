spec_version: chain-spec:v1
chain_version: chain:v1
model: model:v1

runtime:
  temperature: 0.1
  seed: 42
  response_language: ru

rubric:
  criteria:
    - id: correctness
      description: Correctness of solution and logic.
      weight: 0.35
    - id: completeness
      description: Coverage of assignment requirements.
      weight: 0.25
    - id: code_quality
      description: Code quality, readability, and structure.
      weight: 0.20
    - id: edge_cases
      description: Handling of edge and failure cases.
      weight: 0.20
  ai_assistance_policy:
    enabled: true
    affects_score: false
    require_fields:
      - likelihood
      - confidence
      - disclaimer

prompts:
  system: |
    You are an evaluator. Return strict JSON only.
  user_template: |
    Response language: {{runtime.response_language}}

    Assignment title:
    {{assignment.title}}

    Assignment description:
    {{assignment.description}}

    Submission content:
    {{normalized.content_markdown}}

    Rubric criteria:
    {{rubric.criteria}}

    AI assistance policy:
    {{rubric.ai_assistance_policy}}

llm_response:
  type: json
  required:
    - criteria
    - organizer_feedback
    - candidate_feedback
    - ai_assistance
  properties:
    criteria:
      type: array
      items:
        type: object
        required: [id, score, reason]
        properties:
          id: { type: string }
          score: { type: integer, minimum: 1, maximum: 10 }
          reason: { type: string }
    organizer_feedback:
      type: object
      required: [strengths, issues, recommendations]
      properties:
        strengths: { type: array, items: { type: string } }
        issues: { type: array, items: { type: string } }
        recommendations: { type: array, items: { type: string } }
    candidate_feedback:
      type: object
      required: [summary, what_went_well, what_to_improve]
      properties:
        summary: { type: string }
        what_went_well: { type: array, items: { type: string } }
        what_to_improve: { type: array, items: { type: string } }
    ai_assistance:
      type: object
      required: [likelihood, confidence, disclaimer]
      properties:
        likelihood: { type: number, minimum: 0, maximum: 1 }
        confidence: { type: number, minimum: 0, maximum: 1 }
        disclaimer: { type: string }
